
\usepackage{csquotes}
\usepackage{amsmath}
\usepackage{amsthm}        % Does theorem stuff
\usepackage{amssymb} 
\usepackage{xypic}  				%for strange reason I need this to make the two cell diagrams				
\usepackage[2cell]{xy} 			%for commutative diagrams%

\usepackage{color,hyperref}
\definecolor{darkblue}{rgb}{0.0,0.0,0.3}                      %pdf book marks the way I like%
\hypersetup{pdftex=true, colorlinks=true, breaklinks=true, linkcolor=darkblue, menucolor=darkblue, pagecolor=darkblue, urlcolor=darkblue}


\usepackage{graphicx}

%-----------style------------------------%

\addtolength{\parskip}{\baselineskip} %Absätze im Text werden auch tatsächlich zu Absätzen%
\parindent 0pt

%----------new--commands-----------------%

\newcommand{\C}{\mathcal{C}}
\renewcommand{\O}{\mathcal{O}}
\newcommand{\D}{\mathcal{D}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\G}{\mathcal{G}}
\newcommand{\ve}{\varepsilon}
\newcommand{\Mor}{\mathrm{Mor}}
\newcommand{\id}{\operatorname{id}}
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\E}{\operatorname{\mathbf{E}}}

%this command was proposed by Stefan_K%
\newcommand*{\leftterm}{\left\{\substack{\normalsize \text{natural transformations}
  \\h^A \rightarrow F} \right\}}
\newlength{\leftside}
\settowidth{\leftside}{$\leftterm$}

% the following code will uplift the \maketitle title. In standard it is way too low.
\makeatletter % wegen @ in den Befehsnamen
\renewcommand*\@maketitle{%
  \normalfont\normalsize
  \@adminfootnotes
  \@mkboth{\@nx\shortauthors}{\@nx\shorttitle}%
% (SCHW) auskommentiert:  \global\topskip42\p@\relax % 5.5pc   "   "   "     "     "
  \@settitle
  \ifx\@empty\authors \else \@setauthors \fi
  \ifx\@empty\@dedicatory
  \else
    \baselineskip18\p@
    \vtop{\centering{\footnotesize\itshape\@dedicatory\@@par}%
      \global\dimen@i\prevdepth}\prevdepth\dimen@i
  \fi
  \@setabstract
  \normalsize
  \if@titlepage
    \newpage
  \else
    \dimen@34\p@ \advance\dimen@-\baselineskip
    \vskip\dimen@\relax
  \fi
} % end \@maketitle
\makeatother



% -------------- \widebar{ . }  -------------- %

% from http://tex.stackexchange.com/a/60253/4912 

\makeatletter
\let\save@mathaccent\mathaccent
\newcommand*\if@single[3]{%
  \setbox0\hbox{${\mathaccent"0362{#1}}^H$}%
  \setbox2\hbox{${\mathaccent"0362{\kern0pt#1}}^H$}%
  \ifdim\ht0=\ht2 #3\else #2\fi
  }
%The bar will be moved to the right by a half of \macc@kerna, which is computed by amsmath:
\newcommand*\rel@kern[1]{\kern#1\dimexpr\macc@kerna}
%If there's a superscript following the bar, then no negative kern may follow the bar;
%an additional {} makes sure that the superscript is high enough in this case:
\newcommand*\widebar[1]{\@ifnextchar^{{\wide@bar{#1}{0}}}{\wide@bar{#1}{1}}}
%Use a separate algorithm for single symbols:
\newcommand*\wide@bar[2]{\if@single{#1}{\wide@bar@{#1}{#2}{1}}{\wide@bar@{#1}{#2}{2}}}
\newcommand*\wide@bar@[3]{%
  \begingroup
  \def\mathaccent##1##2{%
%Enable nesting of accents:
    \let\mathaccent\save@mathaccent
%If there's more than a single symbol, use the first character instead (see below):
    \if#32 \let\macc@nucleus\first@char \fi
%Determine the italic correction:
    \setbox\z@\hbox{$\macc@style{\macc@nucleus}_{}$}%
    \setbox\tw@\hbox{$\macc@style{\macc@nucleus}{}_{}$}%
    \dimen@\wd\tw@
    \advance\dimen@-\wd\z@
%Now \dimen@ is the italic correction of the symbol.
    \divide\dimen@ 3
    \@tempdima\wd\tw@
    \advance\@tempdima-\scriptspace
%Now \@tempdima is the width of the symbol.
    \divide\@tempdima 10
    \advance\dimen@-\@tempdima
%Now \dimen@ = (italic correction / 3) - (Breite / 10)
    \ifdim\dimen@>\z@ \dimen@0pt\fi
%The bar will be shortened in the case \dimen@<0 !
    \rel@kern{0.6}\kern-\dimen@
    \if#31
      \overline{\rel@kern{-0.6}\kern\dimen@\macc@nucleus\rel@kern{0.4}\kern\dimen@}%
      \advance\dimen@0.4\dimexpr\macc@kerna
%Place the combined final kern (-\dimen@) if it is >0 or if a superscript follows:
      \let\final@kern#2%
      \ifdim\dimen@<\z@ \let\final@kern1\fi
      \if\final@kern1 \kern-\dimen@\fi
    \else
      \overline{\rel@kern{-0.6}\kern\dimen@#1}%
    \fi
  }%
  \macc@depth\@ne
  \let\math@bgroup\@empty \let\math@egroup\macc@set@skewchar
  \mathsurround\z@ \frozen@everymath{\mathgroup\macc@group\relax}%
  \macc@set@skewchar\relax
  \let\mathaccentV\macc@nested@a
%The following initialises \macc@kerna and calls \mathaccent:
  \if#31
    \macc@nested@a\relax111{#1}%
  \else
%If the argument consists of more than one symbol, and if the first token is
%a letter, use that letter for the computations:
    \def\gobble@till@marker##1\endmarker{}%
    \futurelet\first@char\gobble@till@marker#1\endmarker
    \ifcat\noexpand\first@char A\else
      \def\first@char{}%
    \fi
    \macc@nested@a\relax111{\first@char}%
  \fi
  \endgroup
}
\makeatother

% ----------------------- -------------- %



%--------new--enviroments----------------%

\renewcommand{\theequation}{\thesection.\arabic{equation}}         %%                             %I somehow need this for the warning symbol to work 
 \makeatletter                                                      %%                             properly, I don't really know why though%
    \@addtoreset{equation}{section} % Make the equation counter reset each section
    \@addtoreset{footnote}{section} % Make the footnote counter reset each section
                                                                    %%
 \newenvironment{warning}[1][]{%                                    %%
    \begin{trivlist} \item[] \noindent%                             %%
    \begingroup\hangindent=2pc\hangafter=-2                         
    \clubpenalty=10000%                                             										
    \hbox to0pt{\hskip-\hangindent\manfntsymbol{127}\hfill}\ignorespaces%
    \refstepcounter{equation}\textbf{Warning~\theequation}%         
    \@ifnotempty{#1}{\the\thm@notefont \ (#1)}\textbf{.}            
    \let\p@@r=\par \def\p@r{\p@@r \hangindent=0pc} \let\par=\p@r}%  
    {\hspace*{\fill}$\lrcorner$\endgraf\endgroup\end{trivlist}}  
    
    
%\newenvironment{beweis}{\par\begingroup%
%\settowidth{\leftskip}{\emph{Proof.~}}%																											remove to use \begin{beweis}
%\noindent\llap{\emph{Proof.~}}}{\hfill$\Box$\par\endgroup}     
    
  

\newenvironment{tmo}[1]{%
  \trivlist
  \leftskip=0.15cm
  \item[\hskip\labelsep
        \bfseries
   #1\@{.}]\mbox{ }\par\nobreak
   \vskip -0.5em\nobreak% Absatzabstand nachträglich entfernen.
   \noindent
  \leftskip=0.35cm
  \rightskip=0.35cm
  \itshape\ignorespaces
}{%
\endtrivlist}

\newcounter{tm}
% Falls tm abhängig von \section nummeriert werden soll:
%\numberwithin{tm}{section}% anderenfalls auskommentieren!!!
\newenvironment{tm}[1]{% wie tmo aber mit Nummer
  \refstepcounter{tm}%
  \tmo{#1~\thetm}%
}{%
  \endtmo
}
     
\makeatletter

\renewenvironment{proof}[1][\proofname]{\par
  \pushQED{\qed}%
  \normalfont \topsep6\p@\@plus6\p@\relax
  \trivlist
  \leftskip=0.6cm
  
  \item[\hskip\labelsep
        \itshape
    #1\@addpunct{.}]\mbox{ }\par\noindent%
  \leftskip=1cm
  \rightskip=1cm    
}{%
  \popQED\endtrivlist\@endpefalse
}
\makeatother 

\makeatother
\theoremstyle{plain}                                               %%
 \newtheorem{theorem}[equation]{Theorem}                            %%
 \newtheorem*{claim}{Claim}                                         %%
 \newtheorem*{lemma*}{Lemma}
 \newtheorem*{proposition*}{Proposition}                                       %%
 \newtheorem*{theorem*}{Theorem}                                    %%
 \newtheorem{lemma}[equation]{Lemma}                                %%
 \newtheorem{corollary}[equation]{Corollary}                        %%
 \newtheorem{proposition}[equation]{Proposition}                    %%
 \newtheorem{definition}{Definition}
%--produce-the-warning--symbol-----------%
 \DeclareFontFamily{U}{manual}{}                                
 \DeclareFontShape{U}{manual}{m}{n}{ <->  manfnt }{}            
 \newcommand{\manfntsymbol}[1]{%                                
    {\fontencoding{U}\fontfamily{manual}\selectfont\symbol{#1}}}

\makeatother



