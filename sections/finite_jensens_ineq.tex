
\subsection{Jensen's Inequality - Finite Case}

The finite case Jensen's equality is just the convexity criterion expanded via induction to multiple summands.

\begin{proposition}
  Let $\varphi: C \to \mathbb{R}$ be a strictly convex function and $x_i \in C$ for $i=1,\dots,n$. Then for every family $(a_i)_{i=1,...,n}$ with $a_i > 0$, $i=1,\dots,n$, and $\sum_{i=1}^{n} a_i = 1$ the inequality
  \[
  \varphi\left(\sum_{i=1}^{n} a_i x_i\right) \leq \sum_{i=1}^{n} a_i \varphi(x_i)
  \]
  holds, where equality holds if and only if $x_1 = \ldots = x_n$.
\end{proposition}

\begin{proof}
  By induction. The inequality holds trivially for $n=1$ and is the definition of convexity in the case of $n=2$, in which $x_1 = x_2$ has to hold to obtain equality by Proposition \ref{convex_eq}.

  For the induction step consider
  \begin{align}
    \varphi\left(\sum_{i=1}^{n} a_i x_i\right) &= \varphi\left( \sum_{i=1}^{n-1} a_ix_i + a_n x_n \right) = \varphi\left( (1-a_n) \sum_{i=1}^{n-1} \frac{a_i}{1-a_n}x_i + a_n x_n \right) \nonumber \\
    & \leq (1-a_n) \varphi\left( \sum_{i=1}^{n-1} \frac{a_i}{1-a_n} x_i
    \right) + a_n \varphi(x_n) \label{eq:finitJ1} \\ & \leq (1 - a_n) \sum_{i=1}^{n-1}  \frac{a_i}{1-a_n} \varphi(x_i) + a_n \varphi(x_n) \label{eq:finitJ2} \\
     &= \sum_{i=1}^{n} a_i \varphi(x_i), \nonumber
  \end{align}

  where we could use the induction as
  \[
  \sum_{i=1}^{n-1}  \frac{a_i}{1-a_n} = \frac{1-a_n}{1-a_n} = 1.
  \]

  For equality statement, both \ref{eq:finitJ1} and \ref{eq:finitJ2} need to be equalities. By the induction hypothesis \ref{eq:finitJ2} is an equality if and only if $x_1 = \ldots = x_{n-1}$.  By Proposition \ref{convex_eq}, equality in \ref{eq:finitJ1} holds if and only if
  \[
  \sum_{i=1}^{n-1} \frac{a_i}{1-a_n} x_i = x_n.
  \]
  But then already
  \[
  \sum_{i=1}^{n-1} \frac{a_i}{1-a_n} x_i = \sum_{i=1}^{n-1} \frac{a_i}{1-a_n} x_1 = \frac{1-a_n}{1-a_n} x_1 = x_1 = \ldots = x_n.
  \]
  
\end{proof}
